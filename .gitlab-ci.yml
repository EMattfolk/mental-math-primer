tests:
  image: node:latest
  stage: test
  script:
    # Install dependencies
    - apt update
    - apt install libtinfo5
    - npm ci
    - npx elm-tooling install
    - curl https://static.lamdera.com/bin/linux/lamdera -o lamdera
    - chmod a+x lamdera

    # Check build, test and formatting
    - ./lamdera make src/Frontend.elm
    - npx elm-test-rs
    - npx elm-format --validate src tests
